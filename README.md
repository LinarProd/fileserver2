### –ò—Ç–æ–≥–æ–≤—ã–π —Ñ–∞–π–ª `README.md`

---

#### **–ù–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**

# File Management Server

–ü—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏, —Å–∫–∞—á–∏–≤–∞–Ω–∏—è, —É–¥–∞–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞–º–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –°–µ—Ä–≤–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –∏–ª–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL. –í—ã–±–æ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞.
- –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞.
- –í—ã–±–æ—Ä —Ç–∏–ø–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (JSON –∏–ª–∏ PostgreSQL).
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞.

---

## –°—Ñ–µ—Ä—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
- –õ–∏—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞–º–∏.
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –æ–±–º–µ–Ω–∞ —Ñ–∞–π–ª–∞–º–∏ –≤ –∫–æ–º–ø–∞–Ω–∏–∏.
- –•—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –∫–æ–º–∞–Ω–¥.

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
1. Golang (v1.19+).
2. PostgreSQL (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).
3. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```plaintext
/project
‚îú‚îÄ‚îÄ main.go              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞.
‚îú‚îÄ‚îÄ config.json          # –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.
‚îú‚îÄ‚îÄ users.json           # –•—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–ª—è —Ä–µ–∂–∏–º–∞ JSON).
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ main.html        # HTML-—à–∞–±–ª–æ–Ω –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îî‚îÄ‚îÄ styles.css       # –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
‚îú‚îÄ‚îÄ files/               # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.
```

### –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- **`main.go`**: –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞. –†–µ–∞–ª–∏–∑—É–µ—Ç –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã.
- **`config.json`**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä (—Ö–æ—Å—Ç, –ø–æ—Ä—Ç, —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL).
- **`users.json`**: JSON-—Ñ–∞–π–ª –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ JSON).
- **`templates/main.html`**: –®–∞–±–ª–æ–Ω –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
- **`static/styles.css`**: –°—Ç–∏–ª–∏ –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
- **`files/`**: –ü–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL:
   ```bash
   sudo apt update
   sudo apt install postgresql postgresql-contrib
   ```
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL:
   ```bash
   sudo systemctl start postgresql
   ```

3. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
   ```bash
   sudo -u postgres psql
   CREATE DATABASE file_server;
   CREATE USER file_user WITH PASSWORD 'password';
   GRANT ALL PRIVILEGES ON DATABASE file_server TO file_user;
   ```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/your-repo/file-management-server.git
   cd file-management-server
   ```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `config.json`:
   ```json
   {
       "server_host": "localhost",
       "server_port": "8080",
       "file_dir": "./files",
       "user_file": "./users.json",
       "storage_mode": "postgresql",
       "db_host": "localhost",
       "db_port": "5432",
       "db_user": "file_user",
       "db_password": "password",
       "db_name": "file_server"
   }
   ```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ PostgreSQL –¥–ª—è Go:
   ```bash
   go get github.com/lib/pq
   ```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
–°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
go run main.go
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:8080](http://localhost:8080).

---

## –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π

### –§—É–Ω–∫—Ü–∏–∏ –≤ `main.go`

1. **`main()`**:
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ PostgreSQL).
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä.

2. **`initPostgres()`**:
   - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ PostgreSQL –∏ —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

3. **`authMiddleware()`**:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ cookie –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞.

4. **`uploadHandler()`**:
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `file_dir`.

5. **`filesHandler()`**:
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.

6. **`deleteHandler()`**:
   - –£–¥–∞–ª—è–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ñ–∞–π–ª —Å —Å–µ—Ä–≤–µ—Ä–∞.

7. **`downloadHandler()`**:
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∞–π–ª –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.

8. **`logoutHandler()`**:
   - –£–¥–∞–ª—è–µ—Ç cookie –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞.

---

### JavaScript –≤ `main.html`

1. **–§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞**:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏.

2. **–§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤**:
   - –ü–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏.

---

#### **In English**

# File Management Server

A simple server for uploading, downloading, deleting, and managing files through a web interface. The server supports user authentication and allows storing user data in JSON or PostgreSQL, configurable via a settings file.

---

## Features
- User authentication.
- File upload to the server.
- File download from the server.
- File deletion from the server.
- Selectable storage mode for user data (JSON or PostgreSQL).
- File upload progress bar.

---

## Usage Areas
- Personal file management servers.
- Internal file-sharing systems within a company.
- Small team data storage.

---

## Project Structure

```plaintext
/project
‚îú‚îÄ‚îÄ main.go              # Main server file.
‚îú‚îÄ‚îÄ config.json          # Project configuration file.
‚îú‚îÄ‚îÄ users.json           # User storage file (for JSON mode).
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ main.html        # HTML template for the web interface.
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îî‚îÄ‚îÄ styles.css       # Styles for the interface.
‚îú‚îÄ‚îÄ files/               # Directory for storing uploaded files.
```

### File Descriptions
- **`main.go`**: The main server file implementing routes, handlers, and logic.
- **`config.json`**: Configures the server (host, port, storage mode, PostgreSQL connection).
- **`users.json`**: JSON file for storing users (if JSON storage is selected).
- **`templates/main.html`**: Web interface template.
- **`static/styles.css`**: Styles for the web interface.
- **`files/`**: Directory for storing uploaded files.

---

## Installation and Setup

### Step 1: PostgreSQL Installation
1. Install PostgreSQL:
   ```bash
   sudo apt update
   sudo apt install postgresql postgresql-contrib
   ```
2. Start PostgreSQL:
   ```bash
   sudo systemctl start postgresql
   ```

3. Create a user and database:
   ```bash
   sudo -u postgres psql
   CREATE DATABASE file_server;
   CREATE USER file_user WITH PASSWORD 'password';
   GRANT ALL PRIVILEGES ON DATABASE file_server TO file_user;
   ```

### Step 2: Project Setup
1. Clone the repository:
   ```bash
   git clone https://github.com/your-repo/file-management-server.git
   cd file-management-server
   ```

2. Configure `config.json`:
   ```json
   {
       "server_host": "localhost",
       "server_port": "8080",
       "file_dir": "./files",
       "user_file": "./users.json",
       "storage_mode": "postgresql",
       "db_host": "localhost",
       "db_port": "5432",
       "db_user": "file_user",
       "db_password": "password",
       "db_name": "file_server"
   }
   ```

3. Install PostgreSQL dependencies for Go:
   ```bash
   go get github.com/lib/pq
   ```

### Step 3: Start the Server
Build and run the project:
```bash
go run main.go
```

The server will be accessible at: [http://localhost:8080](http://localhost:8080).

---

Feel free to ask if any clarifications or additional features are needed! üòä